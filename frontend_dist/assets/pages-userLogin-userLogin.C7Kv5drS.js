import{r as e,c as s,o as a,g as l,s as o,a as t,b as n,w as c,n as u,i as r,d as i,e as d,f,h as p,t as g,j as _,k as v,I as m,l as y}from"./index-2gCYdGq0.js";import{u as h}from"./userAuth.Bhpsn2CI.js";import{_ as C}from"./_plugin-vue_export-helper.BGUu7VIo.js";const w=C({__name:"userLogin",setup(C){const{login:w,checkLoginStatus:b,currentUser:k}=h(),P=e(""),j=e(!1),x=s((()=>{const e=l("serverConfig");return(null==e?void 0:e.serverHost)||"æœªé…ç½®"})),I=async()=>{if(P.value.trim()){j.value=!0;try{const e=await w(P.value);e.success?(_({title:"ç™»å½•æˆåŠŸ",icon:"success"}),t({url:"/pages/musicPlayer/musicPlayer",success:()=>{console.log("è·³è½¬æˆåŠŸ")},fail:e=>{console.error("è·³è½¬å¤±è´¥:",e),_({title:"é¡µé¢è·³è½¬å¤±è´¥",icon:"none"})}})):_({title:e.message||"ç™»å½•å¤±è´¥",icon:"none"})}catch(e){console.error("ç™»å½•å¤±è´¥:",e),_({title:"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥",icon:"none"})}finally{j.value=!1}}else _({title:"è¯·è¾“å…¥å¯†ç ",icon:"none"})},L=()=>{u({url:"/pages/serverConfig/serverConfig"})};return a((async()=>{const e=l("serverConfig");if(!e||!e.url)return void o({title:"éœ€è¦é…ç½®æœåŠ¡å™¨",content:"è¯·å…ˆé…ç½®æœåŠ¡å™¨åœ°å€æ‰èƒ½ä½¿ç”¨",showCancel:!1,success:()=>{L()}});(await b()).isLoggedIn&&(console.log("æ£€æµ‹åˆ°æœ‰æ•ˆç™»å½•çŠ¶æ€ï¼Œå‡†å¤‡è·³è½¬"),t({url:"/pages/musicPlayer/musicPlayer",success:()=>{console.log("è‡ªåŠ¨ç™»å½•è·³è½¬æˆåŠŸ")},fail:e=>{console.error("è‡ªåŠ¨ç™»å½•è·³è½¬å¤±è´¥:",e)}}))})),(e,s)=>{const a=v,l=r,o=m,t=y;return i(),n(l,{class:"login-page"},{default:c((()=>[d(l,{class:"login-card"},{default:c((()=>[d(l,{class:"card-header"},{default:c((()=>[d(a,{class:"app-icon"},{default:c((()=>[f("ğŸµ")])),_:1}),d(a,{class:"app-title"},{default:c((()=>[f("éŸ³ä¹ä¸€èµ·å¬")])),_:1}),d(a,{class:"app-subtitle"},{default:c((()=>[f("è¯·è¾“å…¥å¯†ç ç™»å½•")])),_:1}),d(a,{class:"app-author"},{default:c((()=>[f("ä½œè€…ï¼šQuietPeng")])),_:1})])),_:1}),d(l,{class:"login-form"},{default:c((()=>[d(l,{class:"form-group"},{default:c((()=>[d(l,{class:"input-wrapper"},{default:c((()=>[d(a,{class:"input-icon"},{default:c((()=>[f("ğŸ”’")])),_:1}),d(o,{class:"password-input",modelValue:P.value,"onUpdate:modelValue":s[0]||(s[0]=e=>P.value=e),type:"password",placeholder:"è¯·è¾“å…¥å¯†ç ",onConfirm:I},null,8,["modelValue"])])),_:1})])),_:1}),d(t,{class:p(["login-btn",{loading:j.value}]),onClick:I,disabled:!P.value||j.value},{default:c((()=>[j.value?(i(),n(a,{key:0},{default:c((()=>[f("ç™»å½•ä¸­...")])),_:1})):(i(),n(a,{key:1},{default:c((()=>[f("ç™»å½•")])),_:1}))])),_:1},8,["disabled","class"])])),_:1}),d(l,{class:"login-info"},{default:c((()=>[d(a,{class:"info-text"},{default:c((()=>[f("ç™»å½•æœ‰æ•ˆæœŸï¼š30å¤©")])),_:1}),d(l,{class:"server-config-entry"},{default:c((()=>[d(t,{class:"config-btn",onClick:L},{default:c((()=>[d(a,{class:"config-icon"},{default:c((()=>[f("âš™ï¸")])),_:1}),d(a,null,{default:c((()=>[f("æœåŠ¡å™¨é…ç½®")])),_:1})])),_:1}),d(a,{class:"server-hint"},{default:c((()=>[f("å½“å‰æœåŠ¡å™¨: "+g(x.value),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-71ec35f0"]]);export{w as default};
